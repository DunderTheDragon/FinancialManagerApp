<Window x:Class="FinancialManagerApp.Views.AddWalletView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" 
        Title="Nowy Portfel" 
        Width="602"
        SizeToContent="Height"
        MaxHeight="{Binding Source={x:Static SystemParameters.PrimaryScreenHeight}, ConverterParameter=0.9, Path=PrimaryScreenHeight}"
        WindowStartupLocation="CenterOwner" 
        ResizeMode="NoResize"
        Background="#ECF0F1">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Utwórz Nowy Portfel" FontSize="20" FontWeight="Bold" Foreground="#2C3E50" Margin="0,0,0,20" HorizontalAlignment="Center"/>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="0,0,0,15">
            <StackPanel Margin="0,0,10,0">
                <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,15" BorderBrush="#D5DBDB" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Typ portfela" FontSize="11" Foreground="#7F8C8D" Margin="0,0,0,10"/>
                        <StackPanel Orientation="Vertical">
                            <RadioButton x:Name="RadioManual" Content="Portfel Manualny (Gotówka, Skarpeta)" GroupName="WalletType" IsChecked="True" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <RadioButton x:Name="RadioAPI" Content="Integracja API (Revolut, Bank)" GroupName="WalletType" FontWeight="SemiBold" Foreground="#3498DB"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,15" BorderBrush="#D5DBDB" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Nazwa portfela" FontSize="11" Foreground="#7F8C8D"/>
                        <TextBox x:Name="WalletNameBox" Padding="5" Margin="0,5,0,15" ToolTip="Np. Konto Firmowe Revolut"/>
                        <TextBlock Text="Opis" FontSize="11" Foreground="#7F8C8D"/>
                        <TextBox x:Name="WalletDescriptionBox" Padding="5" Margin="0,5,0,0" Height="35" TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>

                <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,5" BorderBrush="#D5DBDB" BorderThickness="1">
                    <Grid>
                        <StackPanel Visibility="{Binding IsChecked, ElementName=RadioManual, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <TextBlock Text="Saldo początkowe (PLN)" FontSize="11" Foreground="#7F8C8D"/>
                            <TextBox x:Name="InitialBalanceBox" Text="0,00" Padding="5" Margin="0,5,0,5" FontWeight="Bold" FontSize="16" HorizontalContentAlignment="Right"/>
                            <TextBlock Text="* Wpisz kwotę, którą aktualnie posiadasz." FontSize="10" Foreground="#95A5A6" FontStyle="Italic"/>
                        </StackPanel>

                        <StackPanel Visibility="{Binding IsChecked, ElementName=RadioAPI, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <TextBlock Text="Dostawca usługi" FontSize="11" Foreground="#7F8C8D"/>
                            <ComboBox Margin="0,5,0,15" SelectedIndex="0" FontWeight="SemiBold">
                                <ComboBoxItem Content="Revolut Sandbox (Test)"/>
                                <ComboBoxItem Content="Revolut Business (Production)"/>
                            </ComboBox>
                            <TextBlock Text="Client ID (Issuer)" FontSize="11" Foreground="#7F8C8D"/>
                            <TextBox x:Name="ApiClientIdBox" Padding="5" Margin="0,5,0,10" Background="#F4F6F7"/>
                            <Button Content="Zaloguj i Pobierz Token" Click="BtnAutoLogin_Click" Background="#3498DB" Foreground="White" Margin="0,5,0,10" Padding="5"/>
                            <TextBox x:Name="RefreshTokenBox" Padding="5" Margin="0,5,0,10" Background="#ECF0F1" IsReadOnly="True" ToolTip="Token zostanie pobrany automatycznie po zalogowaniu"/>
                            <TextBlock Text="Sandbox API Key / Secret (Private Key)" FontSize="11" Foreground="#7F8C8D"/>
                            <TextBox x:Name="ApiKeyBox" Padding="5" Margin="0,5,0,5" Background="#F4F6F7" ToolTip="Wklej tutaj całą zawartość pliku private.key (Ctrl+V)" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" MinHeight="100" MaxHeight="200" FontFamily="Consolas" FontSize="10"/>
                            <CheckBox Content="Użyj certyfikatu JWT (Wymagane dla Business API)" IsChecked="True" IsEnabled="False" FontSize="10" Margin="0,5,0,0"/>
                            <TextBlock Text="* Wymaga klucza prywatnego wygenerowanego dla Revolut." FontSize="9" Foreground="#3498DB" Margin="0,10,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <UniformGrid Grid.Row="2" Columns="2" Margin="0,5,0,0">
            <Button Content="Anuluj" IsCancel="True" Margin="0,0,5,0" Padding="10" Background="Transparent" BorderBrush="#BDC3C7" BorderThickness="1"/>
            <Button Content="Połącz i Utwórz" Click="BtnCreate_Click" Background="#1ABC9C" Foreground="White" Margin="5,0,0,0" Padding="10" FontWeight="Bold" BorderThickness="0">
                <Button.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="4"/>
                    </Style>
                </Button.Resources>
            </Button>
        </UniformGrid>
    </Grid>
</Window>